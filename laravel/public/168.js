(window.webpackJsonp=window.webpackJsonp||[]).push([[168],{767:function(e,s,o){"use strict";o.r(s);var t=o(1),r=o.n(t),a={name:"EditUser",props:{caption:{type:String,default:"User id"}},data:function(){return{role:[],resultroles:[],user:{name:"",email:"",roles:null,password:"",password_confirmation:""},statuses:[],message:"",dismissSecs:7,dismissCountDown:0,showDismissibleAlert:!1}},methods:{goBack:function(){this.$router.go(-1)},selectRadioSelectRole:function(e){var s=this.resultroles.indexOf(e);s>-1?this.resultroles.splice(s,1):this.resultroles.push(e)},register:function(){var e=this;r.a.post(this.$apiAdress+"/api/register",{name:e.user.name,email:e.user.email,password:e.user.password,password_confirmation:e.user.password_confirmation,roles:e.user.roles}).then((function(s){e.user.name="",e.user.email="",e.user.password="",e.user.password_confirmation="",e.user.roles=null,e.message="Successfully created user.",e.showAlert()})).catch((function(s){if("The given data was invalid."==s.response.data.message){for(var o in e.message="",s.response.data.errors)s.response.data.errors.hasOwnProperty(o)&&(e.message+=s.response.data.errors[o][0]+"  ");e.showAlert()}else console.log(s),e.$router.push({path:"login"})}))},store:function(){var e=this;e.user.menuroles=this.resultroles.toString(),console.log(e.user),r.a.post(this.$apiAdress+"/api/users?token="+localStorage.getItem("api_token"),e.user).then((function(s){e.user={name:"",email:""},e.message="Successfully created user.",e.showAlert()})).catch((function(s){if(console.log(s),"The given data was invalid."==s.response.data.message){for(var o in e.message="",s.response.data.errors)s.response.data.errors.hasOwnProperty(o)&&(e.message+=s.response.data.errors[o][0]+"  ");e.showAlert()}else console.log(s)}))},countDownChanged:function(e){this.dismissCountDown=e},showAlert:function(){this.dismissCountDown=this.dismissSecs},getData:function(){var e=this;r.a.get(this.$apiAdress+"/api/roles?token="+localStorage.getItem("api_token")).then((function(s){console.log(s),e.role=s.data})).catch((function(e){console.log(e)}))},validator:function(e){return e?e.length>=4:null},validatorsamepassword:function(e){return e?this.user.password==e:null}},mounted:function(){this.getData()}},n=o(0),l=Object(n.a)(a,(function(){var e=this,s=e.$createElement,o=e._self._c||s;return o("CRow",[o("CCol",{attrs:{col:"12",lg:"6"}},[o("CCard",{attrs:{"no-header":""}},[o("CCardBody",[o("h3",[e._v("\n          Créer un utilisateur\n        ")]),e._v(" "),o("CAlert",{attrs:{show:e.dismissCountDown,color:"primary",fade:""},on:{"update:show":function(s){e.dismissCountDown=s}}},[e._v("\n          ("+e._s(e.dismissCountDown)+") "+e._s(e.message)+"\n        ")]),e._v(" "),o("CInput",{attrs:{placeholder:"Nom",prependHtml:"<i class='cui-user'></i>",autocomplete:"username"},model:{value:e.user.name,callback:function(s){e.$set(e.user,"name",s)},expression:"user.name"}}),e._v(" "),o("CInput",{attrs:{placeholder:"Prénom",prependHtml:"<i class='cui-user'></i>",autocomplete:"firstname"},model:{value:e.user.firstname,callback:function(s){e.$set(e.user,"firstname",s)},expression:"user.firstname"}}),e._v(" "),o("CInput",{attrs:{placeholder:"Fonction",prependHtml:"<i class='cui-user'></i>",autocomplete:"fonction"},model:{value:e.user.fonction,callback:function(s){e.$set(e.user,"fonction",s)},expression:"user.fonction"}}),e._v(" "),o("CInput",{attrs:{placeholder:"Lieu",prependHtml:"<i class='cui-user'></i>",autocomplete:"lieu"},model:{value:e.user.lieu,callback:function(s){e.$set(e.user,"lieu",s)},expression:"user.lieu"}}),e._v(" "),o("CInput",{attrs:{placeholder:"E-mail",prepend:"@",autocomplete:"email"},model:{value:e.user.email,callback:function(s){e.$set(e.user,"email",s)},expression:"user.email"}}),e._v(" "),[o("div",{staticClass:"form-group form-row"},[o("CCol",{staticClass:"col-form-label",attrs:{tag:"label",sm:"1"}},[e._v("\n                  Roles\n                ")]),e._v(" "),o("CCol",{class:"form-inline",attrs:{sm:"9"}},e._l(e.role,(function(s){return o("CInputCheckbox",{key:s.name,attrs:{label:s.name,custom:!0,name:"selectRoles",inline:!0},on:{"update:checked":function(o){return e.selectRadioSelectRole(s.name)}}})})),1)],1)],e._v(" "),o("CInput",{attrs:{placeholder:"Mot de passe",type:"password",prependHtml:"<i class='cui-lock-locked'></i>",autocomplete:"new-password","valid-feedback":"Mot de passe correcte","invalid-feedback":"Veuillez saisir un mot de passe de 6 caractère","is-valid":e.validator},scopedSlots:e._u([{key:"prepend-content",fn:function(){return[o("CIcon",{attrs:{name:"cil-lock-locked"}})]},proxy:!0}]),model:{value:e.user.password,callback:function(s){e.$set(e.user,"password",s)},expression:"user.password"}}),e._v(" "),o("CInput",{staticClass:"mb-4",attrs:{placeholder:"Confirmer mot de passe",type:"password",prependHtml:"<i class='cui-lock-locked'></i>",autocomplete:"new-password","valid-feedback":"Mot de passe confirmé","invalid-feedback":"Veuillez confirmer votre mot de passe","is-valid":e.validatorsamepassword},scopedSlots:e._u([{key:"prepend-content",fn:function(){return[o("CIcon",{attrs:{name:"cil-lock-locked"}})]},proxy:!0}]),model:{value:e.user.password_confirmation,callback:function(s){e.$set(e.user,"password_confirmation",s)},expression:"user.password_confirmation"}}),e._v(" "),o("CButton",{attrs:{color:"primary"},on:{click:function(s){return e.store()}}},[e._v("Sauvegarder")]),e._v("  \n\n          "),o("CButton",{attrs:{color:"primary"},on:{click:e.goBack}},[e._v("Retour")])],2)],1)],1)],1)}),[],!1,null,null,null);s.default=l.exports}}]);