(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{11:function(e,t,n){"use strict";var i=n(369),s={name:"ExportButton",props:["items","fields","title"],data:function(){return{show:!1,successModal:!1}},methods:{exporter:function(){if(this.successModal=!0,this.items&&0!=this.items.length){var e=new Blob([this.convertToCSV(this.items)],{type:"text/xls;charset=utf-8"});i.saveAs(e,this.title),this.successModal=!1}else this.$toasted.show("Pas de données",{type:"warning"})},convertToCSV:function(e){return[Object.keys(e[0])].concat(e).map((function(e){return Object.values(e).toString()})).join("\n")}},mounted:function(){var e=localStorage.getItem("roles");null!=e&&(e=e.split(",")),null!=e&&e.indexOf("exporter")>=0&&(this.show=!0)}},a=n(1),r=Object(a.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("CButton",{attrs:{color:"success",disabled:e.successModal},on:{click:function(t){return e.exporter()}}},[e._v("Exporter")]):e._e()}),[],!1,null,null,null);t.a=r.exports},112:function(e,t,n){var i=n(443);"string"==typeof i&&(i=[[e.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(9)(i,s);i.locals&&(e.exports=i.locals)},12:function(e,t,n){"use strict";var i={name:"AddButton",emits:["ajouter"],data:function(){return{show:!1,successModal:!1}},mounted:function(){var e=localStorage.getItem("roles");null!=e&&(e=e.split(",")),null!=e&&e.indexOf("ajouter")>=0&&(this.show=!0)}},s=n(1),a=Object(s.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("CButton",{attrs:{color:"primary"},on:{click:function(t){return e.$emit("ajouter")}}},[e._v("Ajouter")]):e._e()}),[],!1,null,null,null);t.a=a.exports},13:function(e,t,n){"use strict";var i={name:"EditButton",emits:["modifier"],data:function(){return{show:!1,successModal:!1}},mounted:function(){var e=localStorage.getItem("roles");null!=e&&(e=e.split(",")),null!=e&&e.indexOf("modifier")>=0&&(this.show=!0)}},s=n(1),a=Object(s.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("CButton",{attrs:{size:"sm",color:"primary"},on:{click:function(t){return e.$emit("modifier")}}},[n("CIcon",{attrs:{name:"cil-pencil"}})],1):e._e()}),[],!1,null,null,null);t.a=a.exports},14:function(e,t,n){"use strict";var i={name:"DeleteButton",emits:["supprimer"],data:function(){return{show:!1,successModal:!1}},mounted:function(){var e=localStorage.getItem("roles");null!=e&&(e=e.split(",")),null!=e&&e.indexOf("supprimer")>=0&&(this.show=!0)}},s=n(1),a=Object(s.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("CButton",{attrs:{size:"sm",color:"danger"},on:{click:function(t){return e.$emit("supprimer")}}},[n("CIcon",{attrs:{name:"cil-x-circle"}})],1):e._e()}),[],!1,null,null,null);t.a=a.exports},27:function(e,t,n){"use strict";var i=n(2),s=n.n(i),a={name:"ImportButton",components:{XlsCsvParser:n(180).XlsCsvParser},props:["fields","title","apiUrl"],data:function(){return{successModal:!1,show:!1,items:[],fields2:[],columns:[{name:"region",value:"region"},{name:"province",value:"province"},{name:"commune",value:"commune"},{name:"district",value:"district"},{name:"annee",value:"annee"},{name:"mois",value:"mois"},{name:"formation_sanitaire",value:"formation_sanitaire"},{name:"NbFemmeVueCPN",value:"NbFemmeVueCPN"},{name:"NbFemmeInscriteCPN1",value:"NbFemmeInscriteCPN1"},{name:"NbFemmeInscriteCPN1_Trim1",value:"NbFemmeInscriteCPN1_Trim1"},{name:"NbFemmeVueCPN4",value:"NbFemmeVueCPN4"},{name:"NbFemmeInscriteVueCPN_2Td",value:"NbFemmeInscriteVueCPN_2Td"},{name:"NbFemmeFer_Acide_Folique",value:"NbFemmeFer_Acide_Folique"},{name:"NbFemmeFer_Acide_Folique_CPN3",value:"NbFemmeFer_Acide_Folique_CPN3"},{name:"NbGrossesse_Refere",value:"NbGrossesse_Refere"},{name:"NbFemmeVueCPN_TPI3",value:"NbFemmeVueCPN_TPI3"},{name:"NbFemmeVueCPN_TPI3_MILDA",value:"NbFemmeVueCPN_TPI3_MILDA"}],help:"Les colonnes necessaires sont : region, province, commune, district, formation_sanitaire, mois, annee,\n                NbFemmeVueCPN, NbFemmeInscriteCPN1, NbFemmeInscriteCPN1_Trim1, NbFemmeVueCPN4, \n                NbFemmeInscriteVueCPN_2Td, NbFemmeFer_Acide_Folique, NbFemmeFer_Acide_Folique_CPN3, \n                NbGrossesse_Refere, NbFemmeVueCPN_TPI3 et NbFemmeVueCPN_TPI3_MILDA ",currentPage:1,totalRows:0,you:null,message:"",showMessage:!1,dismissSecs:7,dismissCountDown:0,showDismissibleAlert:!1}},methods:{onValidate:function(e){var t=this;this.results=e,this.items=[];for(var n=0;n<this.results[0].data.length;n++)this.items.push({id:n});this.results.map((function(e){var n=0,i=!0,s=!1,a=void 0;try{for(var r,o=t.items[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var c=r.value;"NA"==e.data[n]||"NULL"==e.data[n]||null==e.data[n]||null==e.data[n]?c[e.column]=null:c[e.column]=e.data[n],n++}}catch(e){s=!0,a=e}finally{try{i||null==o.return||o.return()}finally{if(s)throw a}}}))},deleteData:function(e){this.items=this.items.filter((function(t){return t.id!==e}))},storeMany:function(){var e=this;console.log({items:e.items}),s.a.post(this.$apiAdress+"/api/"+e.apiUrl+"/storeMany?token="+localStorage.getItem("api_token"),{items:e.items}).then((function(t){e.items={},e.$toasted.show("Les données ont été importées",{type:"success"})})).catch((function(t){if("The given data was invalid."==t.response.data.message){for(var n in e.message="",t.response.data.errors)t.response.data.errors.hasOwnProperty(n)&&(e.message+=t.response.data.errors[n][0]+"  ");e.$toasted.show(e.message,{type:"error"})}else console.log(t),e.$router.push({path:"login"})}))}},mounted:function(){this.columns=[],this.fields2=[],this.help="Les colonnes necessaires sont :";var e=!0,t=!1,n=void 0;try{for(var i,s=this.fields[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var a=i.value;this.columns.push({name:a,value:a}),this.fields2.push(a),this.help=this.help+" "+a+","}}catch(e){t=!0,n=e}finally{try{e||null==s.return||s.return()}finally{if(t)throw n}}this.fields2.push("actions");var r=localStorage.getItem("roles");null!=r&&(r=r.split(",")),null!=r&&r.indexOf("importer")>=0&&(this.show=!0)}},r=n(1),o=Object(r.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"contents"}},[n("CModal",{staticStyle:{display:"contents"},attrs:{title:e.title,color:"success",size:"lg",show:e.successModal},on:{"update:show":function(t){e.successModal=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[n("CButton",{attrs:{color:"danger"},on:{click:function(t){e.successModal=!1}}},[e._v("Annuler")]),e._v(" "),e.items.length>0?n("CButton",{attrs:{size:"sm",color:"success"},on:{click:function(t){return e.storeMany()}}},[n("CIcon",{attrs:{name:"cil-x-circle"}}),e._v(" Importer")],1):e._e()]},proxy:!0}])},[n("CRow",[n("CCol",{attrs:{col:"12",xl:"12"}},[n("xls-csv-parser",{attrs:{columns:e.columns,help:e.help,lang:"fr"},on:{"on-validate":e.onValidate}})],1),e._v(" "),e.items.length>0?n("CCol",{attrs:{col:"12",xl:"12"}},[n("transition",{attrs:{name:"slide"}},[n("CDataTable",{attrs:{hover:"",sorter:"",items:e.items,fields:e.fields2},scopedSlots:e._u([{key:"actions",fn:function(t){var i=t.item;return[n("td",[n("div",{staticClass:"card-header-actions",staticStyle:{display:"flex"}},[e._v("\r\n                    \r\n                      "),n("CButton",{attrs:{size:"sm",color:"danger"},on:{click:function(t){return e.deleteData(i.id)}}})],1)])]}}],null,!1,1113930606)})],1)],1):e._e()],1)],1),e._v(" "),e.show?n("CButton",{attrs:{color:"warning"},on:{click:function(t){e.successModal=!0}}},[e._v("Importer")]):e._e(),e._v(" \r\n")],1)}),[],!1,null,null,null);t.a=o.exports},442:function(e,t,n){"use strict";var i=n(112);n.n(i).a},443:function(e,t,n){(e.exports=n(8)(!1)).push([e.i,"\n.card-body[data-v-1a28976e] table > tbody > tr > td {\r\n  cursor: pointer;\n}\n.width-max-content[data-v-1a28976e]{\r\n  width: -webkit-max-content;\r\n  width: -moz-max-content;\r\n  width: max-content;\n}\r\n",""])},855:function(e,t,n){"use strict";n.r(t);var i=n(2),s=n.n(i),a=n(11),r=n(12),o=n(13),c=n(14),u=n(27),l={name:"IndicateurCarteSanitaire",components:{ExportButton:a.a,AddButton:r.a,EditButton:o.a,DeleteButton:c.a,ImportButton:u.a},data:function(){return{items:[],fields:["id","region","province","commune","district","formation_sanitaire","mois","annee","NbLit_SuiteCouche","NbLit_HospiMaternite","NbLit_HospiAutreService","actions"],fieldsI:["region","province","commune","district","formation_sanitaire","mois","annee","NbLit_SuiteCouche","NbLit_HospiMaternite","NbLit_HospiAutreService"],currentPage:1,perPage:5,totalRows:0,you:null,message:"",showMessage:!1,dismissSecs:7,dismissCountDown:0,showDismissibleAlert:!1}},computed:{},methods:{getRowCount:function(e){return e.length},IndicateurCarteSanitaireLink:function(e){return"indicateur_carte_sanitaires/".concat(e.toString())},editLink:function(e){return"indicateur_carte_sanitaires/".concat(e.toString(),"/edit")},showIndicateurCarteSanitaire:function(e){var t=this.IndicateurCarteSanitaireLink(e);this.$router.push({path:t})},editIndicateurCarteSanitaire:function(e){var t=this.editLink(e);this.$router.push({path:t})},deleteIndicateurCarteSanitaire:function(e){var t=this;s.a.post(this.$apiAdress+"/api/indicateur_carte_sanitaires/"+e+"?token="+localStorage.getItem("api_token"),{_method:"DELETE"}).then((function(e){t.message="Successfully deleted Indicateur Carte Sanitaire.",t.showAlert(),t.getIndicateurCarteSanitaire()})).catch((function(e){console.log(e),t.$router.push({path:"/login"})}))},createIndicateurCarteSanitaire:function(){this.$router.push({path:"indicateur_carte_sanitaires/create"})},countDownChanged:function(e){this.dismissCountDown=e},showAlert:function(){this.dismissCountDown=this.dismissSecs},getIndicateurCarteSanitaire:function(){var e=this;s.a.get(this.$apiAdress+"/api/indicateur_carte_sanitaires?token="+localStorage.getItem("api_token")).then((function(t){e.items=t.data,console.log(t)})).catch((function(t){console.log(t),e.$router.push({path:"/login"})}))}},mounted:function(){this.getIndicateurCarteSanitaire()}},m=(n(442),n(1)),d=Object(m.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("CRow",[n("CCol",{attrs:{col:"12",xl:"12"}},[n("transition",{attrs:{name:"slide"}},[n("CCard",[n("CCardHeader",[e._v("\n          Systeme Information Sanitaires\n          "),n("div",{staticClass:"card-header-actions"},[n("AddButton",{on:{ajouter:function(t){return e.createIndicateurCarteSanitaire()}}}),e._v(" \n           "),n("ImportButton",{attrs:{title:"Importation données Systeme Information Sanitaires",fields:e.fieldsI,apiUrl:"indicateur_carte_sanitaires"}}),e._v(" \n           "),n("ExportButton",{attrs:{items:e.items,title:"IndicateurCarteSanitaire",fields:e.fields}}),e._v(" \n          ")],1)]),e._v(" "),n("CCardBody",[n("CAlert",{attrs:{show:e.dismissCountDown,color:"primary",fade:""},on:{"update:show":function(t){e.dismissCountDown=t}}},[e._v("\n            ("+e._s(e.dismissCountDown)+") "+e._s(e.message)+"\n          ")]),e._v(" "),n("CDataTable",{attrs:{hover:"",items:e.items,fields:e.fields,"items-per-page":10,pagination:""},scopedSlots:e._u([{key:"formation_sanitaire",fn:function(t){var i=t.item;return[n("td",[n("label",{staticClass:"width-max-content"},[n("strong",[e._v(e._s(i.formation_sanitaire))])])])]}},{key:"region",fn:function(t){var i=t.item;return[n("td",[n("label",{staticClass:"width-max-content"},[e._v(e._s(i.region))])])]}},{key:"province",fn:function(t){var i=t.item;return[n("td",[n("label",{staticClass:"width-max-content"},[e._v(e._s(i.province))])])]}},{key:"commune",fn:function(t){var i=t.item;return[n("td",[n("label",{staticClass:"width-max-content"},[e._v(e._s(i.commune))])])]}},{key:"district",fn:function(t){var i=t.item;return[n("td",[n("label",{staticClass:"width-max-content"},[e._v(e._s(i.district))])])]}},{key:"actions",fn:function(t){var i=t.item;return[n("td",[n("div",{staticClass:"card-header-actions",staticStyle:{display:"flex"}},[n("CButton",{attrs:{color:"secondary",size:"sm"},on:{click:function(t){return e.showIndicateurCarteSanitaire(i.id)}}},[e._v("Détail")]),e._v("\n                 \n                "),n("EditButton",{on:{modifier:function(t){return e.editIndicateurCarteSanitaire(i.id)}}}),e._v("\n                 \n                    "),n("DeleteButton",{on:{supprimer:function(t){return e.deleteIndicateurCarteSanitaire(i.id)}}})],1)])]}}])})],1)],1)],1)],1)],1)}),[],!1,null,"1a28976e",null);t.default=d.exports}}]);