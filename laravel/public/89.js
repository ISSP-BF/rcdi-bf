(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{782:function(e,o,n){"use strict";n.r(o);var t=n(1),s=n.n(t),a={name:"EditProvince",props:{caption:{type:String,default:"Province id"}},data:function(){return{commune:{code:"",province_id:"",commune:""},provinces:[],message:"",dismissSecs:7,dismissCountDown:0}},methods:{goBack:function(){this.$router.go(-1)},update:function(){var e=this;s.a.post(this.$apiAdress+"/api/communes/"+e.$route.params.id+"?token="+localStorage.getItem("api_token"),{_method:"PUT",code:e.commune.code,province_id:e.commune.province_id,commune:e.commune.commune}).then((function(o){e.message="Successfully updated commune.",e.showAlert(),e.$toasted.show("La commune a été mises à jour",{type:"success"}),e.$router.go(-1)})).catch((function(o){if("The given data was invalid."==o.response.data.message){for(var n in e.message="",o.response.data.errors)o.response.data.errors.hasOwnProperty(n)&&(e.message+=o.response.data.errors[n][0]+"  ");e.$toasted.show(e.message,{type:"error"}),e.showAlert()}else console.log(o),e.$router.push({path:"/login"})}))},showAlert:function(){this.dismissCountDown=this.dismissSecs}},mounted:function(){var e=this;s.a.get(this.$apiAdress+"/api/communes/"+e.$route.params.id+"/edit?token="+localStorage.getItem("api_token")).then((function(o){e.provinces=o.data.provinces,e.commune=o.data.commune})).catch((function(o){console.log(o),e.$router.push({path:"/login"})}))}},c=n(0),r=Object(c.a)(a,(function(){var e=this,o=e.$createElement,n=e._self._c||o;return n("CRow",[n("CCol",{attrs:{col:"12",lg:"6"}},[n("CCard",[n("CCardBody",[n("h3",[e._v("\n          Modifier Commune id:  "+e._s(e.$route.params.id)+"\n        ")]),e._v(" "),n("CAlert",{attrs:{show:e.dismissCountDown,color:"primary",fade:""},on:{"update:show":function(o){e.dismissCountDown=o}}},[e._v("\n          ("+e._s(e.dismissCountDown)+") "+e._s(e.message)+"\n        ")]),e._v(" "),n("CInput",{attrs:{label:"Code",type:"text",placeholder:"Code"},model:{value:e.commune.code,callback:function(o){e.$set(e.commune,"code",o)},expression:"commune.code"}}),e._v(" "),n("CSelect",{attrs:{value:e.commune.province_id,options:e.provinces,label:"Province"},on:{"update:value":function(o){return e.$set(e.commune,"province_id",o)}}}),e._v(" "),n("CInput",{attrs:{label:"Commune",type:"text",placeholder:"Commune"},model:{value:e.commune.commune,callback:function(o){e.$set(e.commune,"commune",o)},expression:"commune.commune"}}),e._v(" "),n("CButton",{attrs:{color:"primary"},on:{click:function(o){return e.update()}}},[e._v("Modifier")]),e._v("  \n        "),n("CButton",{attrs:{color:"secondary"},on:{click:e.goBack}},[e._v("Retour")])],1)],1)],1)],1)}),[],!1,null,null,null);o.default=r.exports}}]);