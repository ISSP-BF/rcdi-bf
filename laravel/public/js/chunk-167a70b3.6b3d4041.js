(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-167a70b3"],{"04bc":function(e,t,n){"use strict";n("b421")},"7a08":function(e,t,n){},"9aab":function(e,t,n){"use strict";n("aa35")},aa35:function(e,t,n){},b421:function(e,t,n){},f593:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"c-app"},[t("TheSidebar"),t("CWrapper",[t("TheHeader"),t("div",{staticClass:"c-body"},[t("main",{staticClass:"c-main"},[t("CContainer",{attrs:{fluid:""}},[t("transition",{attrs:{name:"fade"}},[t("router-view")],1)],1)],1),t("TheFooter")],1)],1)],1)},o=[],r=function(){var e=this,t=e._self._c;return t("CSidebar",{attrs:{fixed:"",minimize:e.minimize,show:e.show},on:{"update:show":function(t){return e.$store.commit("set",["sidebarShow",t])}}},[t("CSidebarBrand",{staticClass:"d-md-down-none",attrs:{to:"/"}},[t("img",{staticClass:"d-block",attrs:{src:"img/avatars/logo-full.png",size:"custom-size",height:50,viewBox:"0 0 ".concat(e.minimize?110:556," 134")}})]),t("CRenderFunction",{attrs:{flat:"","content-to-render":e.nav}}),t("CSidebarMinimizer",{staticClass:"d-md-down-none",nativeOn:{click:function(t){return e.$store.commit("set",["sidebarMinimize",!e.minimize])}}})],1)},i=[],s=n("bc3a"),c=n.n(s),l={name:"TheSidebar",data:function(){return{nav:[],buffor:[]}},computed:{show:function(){return this.$store.state.sidebarShow},minimize:function(){return this.$store.state.sidebarMinimize}},methods:{dropdown:function(e){for(var t={_name:"CSidebarNavDropdown",name:e["name"],route:e["href"],icon:e["icon"],_children:[]},n=0;n<e["elements"].length;n++)"dropdown"==e["elements"][n]["slug"]?t._children.push(this.dropdown(e["elements"][n])):t._children.push({_name:"CSidebarNavItem",name:e["elements"][n]["name"],to:e["elements"][n]["href"],icon:e["elements"][n]["icon"]});return t},rebuildData:function(e){this.buffor=[{_name:"CSidebarNav",_children:[]}];for(var t=0;t<e.length;t++)switch(e[t]["slug"]){case"link":-1!==e[t]["href"].indexOf("http")?this.buffor[0]._children.push({_name:"CSidebarNavItem",name:e[t]["name"],href:e[t]["href"],icon:e[t]["icon"],target:"_blank"}):this.buffor[0]._children.push({_name:"CSidebarNavItem",name:e[t]["name"],to:e[t]["href"],icon:e[t]["icon"]});break;case"title":this.buffor[0]._children.push({_name:"CSidebarNavTitle",_children:[e[t]["name"]]});break;case"dropdown":this.buffor[0]._children.push(this.dropdown(e[t]));break}return this.buffor}},mounted:function(){var e=this;this.$root.$on("toggle-sidebar",(function(){var t=!0===e.show||"responsive"===e.show;e.show=!t&&"responsive"})),this.$root.$on("toggle-sidebar-mobile",(function(){var t="responsive"===e.show||!1===e.show;e.show=!!t||"responsive"}));var t=this;c.a.get(this.$apiAdress+"/api/menu?token="+localStorage.getItem("api_token")).then((function(e){t.nav=t.rebuildData(e.data)})).catch((function(e){console.log(e),t.$router.push({path:"/login"})}))}},u=l,d=n("2877"),m=Object(d["a"])(u,r,i,!1,null,null,null),h=m.exports,f=function(){var e=this,t=e._self._c;return t("CHeader",{attrs:{fixed:"","with-subheader":"",light:""}},[t("CToggler",{staticClass:"ml-3 d-lg-none",attrs:{"in-header":""},on:{click:function(t){return e.$store.commit("toggleSidebarMobile")}}}),t("CToggler",{staticClass:"ml-3 d-md-down-none",attrs:{"in-header":""},on:{click:function(t){return e.$store.commit("toggleSidebarDesktop")}}}),t("CHeaderBrand",{staticClass:"mx-auto d-lg-none",attrs:{to:"/"}},[t("img",{staticClass:"d-block",attrs:{src:"img/avatars/logo-full-no-logo.png",size:"custom-size",height:50,viewBox:"0 0 ".concat(e.minimize?110:556," 134")}})]),t("CMenu"),t("CHeaderNav",{staticClass:"mr-3"},[t("TheHeaderDropdownBk")],1),t("CHeaderNav",{staticClass:"mr-4"},[t("TheHeaderDropdownAccnt")],1),t("CSubheader",{staticClass:"px-3"},[t("CBreadcrumbRouter",{staticClass:"border-0 mb-0"})],1)],1)},p=[],g=function(){var e=this,t=e._self._c;return t("CHeaderNav",{staticClass:"d-md-down-none mr-auto"},e._l(e.nav,(function(n){return t("CHeaderNavItem",{key:n.name},["CSidebarNavItem"==n._name?t("CHeaderNavLink",{attrs:{href:"#"+n.href}},[e._v(" "+e._s(n.name)+" ")]):e._e(),"CSidebarNavDropdown"==n._name?t("CDropdown",{attrs:{color:"link",caret:!1},scopedSlots:e._u([{key:"toggler-content",fn:function(){return[t("a",{staticClass:"c-header-nav-link"},[e._v(" "+e._s(n.name)+" ")])]},proxy:!0}],null,!0)},e._l(n._children,(function(n){return t("CDropdownItem",{key:n.name,attrs:{href:"#"+n.to}},[e._v(" "+e._s(n.name)+" "+e._s(n.name)+" ")])})),1):e._e()],1)})),1)},b=[],v={name:"Menu",data:function(){return{nav:[],buffor:[]}},methods:{dropdown:function(e){for(var t={_name:"CSidebarNavDropdown",name:e["name"],route:e["href"],icon:e["icon"],_children:[]},n=0;n<e["elements"].length;n++)"dropdown"==e["elements"][n]["slug"]?t._children.push(this.dropdown(e["elements"][n])):t._children.push({_name:"CSidebarNavItem",name:e["elements"][n]["name"],to:e["elements"][n]["href"],icon:e["elements"][n]["icon"]});return t},rebuildData:function(e){this.buffor=[];for(var t=0;t<e.length;t++)switch(e[t]["slug"]){case"link":-1!==e[t]["href"].indexOf("http")?this.buffor.push({_name:"CSidebarNavItem",name:e[t]["name"],href:e[t]["href"],icon:e[t]["icon"],target:"_blank"}):this.buffor.push({_name:"CSidebarNavItem",name:e[t]["name"],to:e[t]["href"],icon:e[t]["icon"]});break;case"title":this.buffor.push({_name:"CSidebarNavTitle",_children:[e[t]["name"]]});break;case"dropdown":this.buffor.push(this.dropdown(e[t]));break}return this.buffor}},mounted:function(){var e=this;c.a.get(this.$apiAdress+"/api/menu?token="+localStorage.getItem("api_token")+"&menu=top_menu").then((function(t){e.nav=e.rebuildData(t.data)})).catch((function(t){e.$router.push({path:"/login"})}))}},C=v,_=Object(d["a"])(C,g,b,!1,null,null,null),w=_.exports,k=function(){var e=this,t=e._self._c;return e.isAdmin?t("CDropdown",{staticClass:"c-header-nav-items",attrs:{inNav:"",placement:"bottom-end","add-menu-classes":"pt-0"},scopedSlots:e._u([{key:"toggler",fn:function(){return[t("div",{staticStyle:{cursor:"pointer"}},[t("CIcon",{staticStyle:{cursor:"pointer"},attrs:{name:"cil-bell"}}),t("CBadge",{staticStyle:{cursor:"pointer"},attrs:{color:"danger",shape:"pill"}},[e._v(e._s(e.itemsCount))])],1)]},proxy:!0}],null,!1,1950223827)},[t("CDropdownHeader",{staticClass:"text-center",attrs:{tag:"div",color:"light"}},[t("strong",[e._v("Mise à jour")])]),e.itemsCount>0?t("CDropdownItem",{on:{click:function(t){return e.BkDataUpdated()}}},[t("CIcon",{attrs:{name:"cil-user"}}),e._v(" Valider ")],1):e._e(),t("CDropdownDivider"),t("CDropdownItem",[t("CIcon",{attrs:{name:"cil-shield-alt"}}),e._v(" Changer les paramètres ")],1)],1):e._e()},S=[],D={name:"TheHeaderDropdownBk",data:function(){return{itemsCount:null,isAdmin:!1}},methods:{getBkDataUpdatedNumber:function(){var e=this;c.a.get(this.$apiAdress+"/api/BkDataUpdatedNumber?token="+localStorage.getItem("api_token")).then((function(t){e.itemsCount=t.data,0==e.itemsCount&&(e.itemsCount=null)})).catch((function(e){console.log(e)}))},BkDataUpdated:function(){this.$toasted.show("Veuillez patienter pendant la mise à jour",{type:"warning"}),self=this,c.a.get(this.$apiAdress+"/api/BkDataUpdated?token="+localStorage.getItem("api_token")).then((function(e){self.getBkDataUpdatedNumber(),self.$toasted.show("La base de donnée à été mis à jour",{type:"success"})})).catch((function(e){console.log(e)}))}},mounted:function(){var e=localStorage.getItem("roles");null!=e&&(e=e.split(","),e.indexOf("admin")>=0&&(this.isAdmin=!0,this.getBkDataUpdatedNumber()))}},I=D,N=(n("9aab"),Object(d["a"])(I,k,S,!1,null,"b5ccfcf8",null)),x=N.exports,$=function(){var e=this,t=e._self._c;return e.isConnected?t("CDropdown",{staticClass:"c-header-nav-items",attrs:{inNav:"",placement:"bottom-end","add-menu-classes":"pt-0"},scopedSlots:e._u([{key:"toggler",fn:function(){return[t("CHeaderNavLink",[t("div",{staticClass:"c-avatar"},[t("img",{staticClass:"c-avatar-img",attrs:{src:"img/avatars/logo.png"}})])])]},proxy:!0}],null,!1,2505149710)},[t("CDropdownHeader",{staticClass:"text-center",attrs:{tag:"div",color:"light"}},[t("strong",[e._v("Utilisateur")])]),t("CDropdownItem",{on:{click:function(t){return e.profilUser()}}},[t("CIcon",{attrs:{name:"cil-user"}}),e._v(" Mon Profil ")],1),t("CDropdownDivider"),t("CDropdownItem",[t("CIcon",{attrs:{name:"cil-shield-alt"}}),e._v(" Verrouillé ")],1),t("CDropdownItem",{on:{click:function(t){return e.logout()}}},[t("CIcon",{attrs:{name:"cil-lock-locked"}}),e._v(" Deconnexion ")],1)],1):e._e()},T=[],H={name:"TheHeaderDropdownAccnt",data:function(){return{itemsCount:0,isConnected:!1}},methods:{profilUser:function(){this.$router.push({path:"/users/profil"})},logout:function(){var e=this;c.a.post(this.$apiAdress+"/api/logout?token="+localStorage.getItem("api_token"),{}).then((function(t){localStorage.removeItem("api_token"),localStorage.removeItem("roles"),e.$router.push({path:"/login"})})).catch((function(t){localStorage.removeItem("api_token"),localStorage.removeItem("roles"),e.$router.push({path:"/login"}),console.log(t)}))},refresh:function(){c.a.post(this.$apiAdress+"/api/refresh?token="+localStorage.getItem("api_token"),{}).then((function(e){localStorage.setItem("api_token",e.data.access_token),localStorage.setItem("roles",e.data.roles)})).catch((function(e){console.log(e),localStorage.removeItem("api_token"),localStorage.removeItem("roles")}))}},mounted:function(){this.refresh();var e=localStorage.getItem("roles");null!=e&&(this.isConnected=!0)}},B=H,z=(n("f5c4"),Object(d["a"])(B,$,T,!1,null,"5b24632c",null)),y=z.exports,A={name:"TheHeader",components:{TheHeaderDropdownAccnt:y,TheHeaderDropdownBk:x,CMenu:w},data:function(){return{minimize:""}}},O=A,j=Object(d["a"])(O,f,p,!1,null,null,null),U=j.exports,M=function(){var e=this,t=e._self._c;return t("CFooter",{attrs:{fixed:!1}},[t("div",[t("a",{attrs:{href:"https://www.issp.bf",target:"_blank"}},[e._v("ISSP")]),t("span",{staticClass:"ml-1"},[e._v("© "+e._s((new Date).getFullYear())+" RCDI-BF.")])]),t("div",{staticClass:"ml-auto"},[t("span",{staticClass:"mr-1"},[e._v("Propulsé par ")]),t("a",{attrs:{href:"https://rcdi.bf",target:"_blank"}},[e._v("ISSP pour RCDI-BF")])])])},F=[],P={name:"TheFooter"},R=P,L=Object(d["a"])(R,M,F,!1,null,null,null),V=L.exports,J={name:"TheContainer",components:{TheSidebar:h,TheHeader:U,TheFooter:V}},W=J,Y=(n("04bc"),Object(d["a"])(W,a,o,!1,null,"0c8babf5",null));t["default"]=Y.exports},f5c4:function(e,t,n){"use strict";n("7a08")}}]);
//# sourceMappingURL=chunk-167a70b3.6b3d4041.js.map