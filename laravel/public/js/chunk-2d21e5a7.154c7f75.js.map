{"version":3,"sources":["webpack:///./src/views/resources/CreateResources.vue","webpack:///./src/views/resources/CreateResourceField.vue","webpack:///src/views/resources/CreateResourceField.vue","webpack:///./src/views/resources/CreateResourceField.vue?e86c","webpack:///./src/views/resources/CreateResourceField.vue?50cc","webpack:///src/views/resources/CreateResources.vue","webpack:///./src/views/resources/CreateResources.vue?e894","webpack:///./src/views/resources/CreateResources.vue?f6f8"],"names":["render","_vm","this","_c","_self","attrs","_v","_s","form","name","dismissCountDown","on","$event","message","_l","columns","column","key","id","relations","inputOptions","getData","receiveDataFormField","staticClass","storeFirstStep","goBack","staticRenderFns","flag","type","model","value","callback","$$v","expression","column_name","relation","label","handleFileUpload","component"],"mappings":"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","file":"js/chunk-2d21e5a7.154c7f75.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('CRow',[_c('CCol',{attrs:{\"col\":\"12\",\"xl\":\"6\"}},[_c('transition',{attrs:{\"name\":\"slide\"}},[_c('CCard',[_c('CCardBody',[_c('h3',[_vm._v(\" Create \"+_vm._s(_vm.form.name)+\" \")]),_c('CAlert',{attrs:{\"show\":_vm.dismissCountDown,\"color\":\"primary\",\"fade\":\"\"},on:{\"update:show\":function($event){_vm.dismissCountDown=$event}}},[_vm._v(\" (\"+_vm._s(_vm.dismissCountDown)+\") \"+_vm._s(_vm.message)+\" \")]),_vm._l((_vm.columns),function(column){return _c('CreateResourceField',{key:column.id,attrs:{\"column\":column,\"relations\":_vm.relations,\"options\":_vm.inputOptions,\"getData\":_vm.getData},on:{\"sendData\":_vm.receiveDataFormField}})}),_c('CButton',{staticClass:\"mt-2\",attrs:{\"color\":\"primary\"},on:{\"click\":function($event){return _vm.storeFirstStep()}}},[_vm._v(\"Create\")]),_c('CButton',{staticClass:\"mt-2\",attrs:{\"color\":\"primary\"},on:{\"click\":_vm.goBack}},[_vm._v(\"Back\")])],2)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"mb-1 mt-1\"},[(_vm.flag)?_c('div',[(_vm.column.type == 'checkbox')?_c('div',[_c('CInputCheckbox',{attrs:{\"label\":_vm.column.name,\"value\":\"true\",\"checked\":false},model:{value:(_vm.model),callback:function ($$v) {_vm.model=$$v},expression:\"model\"}})],1):(_vm.column.type == 'radio')?_c('div',[_c('label',{staticClass:\"mt-3\"},[_vm._v(\" \"+_vm._s(_vm.column.name)+\" \")]),_c('CInputRadio',{attrs:{\"label\":\"yes\",\"type\":\"radio\",\"value\":\"true\",\"name\":_vm.column.column_name,\"checked\":false}}),_c('CInputRadio',{attrs:{\"label\":\"no\",\"type\":\"radio\",\"value\":\"false\",\"name\":_vm.column.column_name,\"checked\":false}})],1):_c('div',[_c('CInput',{attrs:{\"label\":_vm.column.name,\"type\":_vm.column.type,\"placeholder\":_vm.column.name},model:{value:(_vm.model),callback:function ($$v) {_vm.model=$$v},expression:\"model\"}})],1)]):(_vm.column.type == 'relation_select')?_c('div',[_c('CSelect',{attrs:{\"label\":_vm.column.name,\"options\":_vm.relations['relation_' + _vm.column.column_name],\"value\":_vm.model},on:{\"update:value\":function($event){_vm.model=$event}}})],1):(_vm.column.type == 'relation_radio')?_c('div',[_c('label',{staticClass:\"mt-3\"},[_vm._v(_vm._s(_vm.column.name))]),_vm._l((_vm.relations['relation_' + _vm.column.column_name]),function(relation){return _c('CInputRadio',{key:relation.value,attrs:{\"label\":relation.label,\"type\":\"radio\",\"value\":relation.value,\"name\":_vm.column.column_name}})})],2):(_vm.column.type == 'file' || _vm.column.type == 'image')?_c('div',[_c('CInputFile',{attrs:{\"label\":_vm.column.name},on:{\"change\":_vm.handleFileUpload}})],1):(_vm.column.type == 'text_area')?_c('div',[_c('CTextarea',{attrs:{\"label\":_vm.column.name,\"placeholder\":_vm.column.name,\"rows\":\"9\"},model:{value:(_vm.model),callback:function ($$v) {_vm.model=$$v},expression:\"model\"}})],1):_c('div',[_c('p',[_vm._v(\"Not recognize field type: \"+_vm._s(_vm.column.type))])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"mb-1 mt-1\">\n        <div v-if=\"flag\">\n            <div v-if=\"column.type == 'checkbox'\">\n              <CInputCheckbox\n                :label=\"column.name\"\n                value=\"true\"\n                :checked=\"false\"\n                v-model=\"model\"\n              />\n            </div>\n            <div v-else-if=\"column.type == 'radio'\">\n              <label class=\"mt-3\"> {{ column.name }} </label>\n              <CInputRadio\n                label=\"yes\"\n                type=\"radio\"\n                value=\"true\"\n                :name=\"column.column_name\"\n                :checked=\"false\"\n              />\n              <CInputRadio\n                label=\"no\"\n                type=\"radio\"\n                value=\"false\"\n                :name=\"column.column_name\"\n                :checked=\"false\"\n              />\n            </div>\n            <div v-else>\n              <CInput \n                :label=\"column.name\" \n                :type=\"column.type\" \n                :placeholder=\"column.name\" \n                v-model=\"model\"\n              ></CInput>\n            </div>\n        </div>\n        <div v-else-if=\"column.type == 'relation_select'\">\n          <CSelect\n            :label=\"column.name\"\n            :options=\"relations['relation_' + column.column_name]\"\n            :value.sync=\"model\"\n          />\n        </div>\n        <div v-else-if=\"column.type == 'relation_radio'\">\n          <label class=\"mt-3\">{{ column.name }}</label>\n          <CInputRadio\n            v-for=\"relation in relations['relation_' + column.column_name]\"\n            :key=\"relation.value\"\n            :label=\"relation.label\"\n            type=\"radio\"\n            :value=\"relation.value\"\n            :name=\"column.column_name\"\n          />        \n        </div>\n        <div v-else-if=\"column.type == 'file' || column.type == 'image'\">\n          <CInputFile\n            :label=\"column.name\" \n            v-on:change=\"handleFileUpload\"\n          />\n        </div>\n        <div v-else-if=\"column.type == 'text_area'\">\n          <CTextarea\n            :label=\"column.name\"\n            :placeholder=\"column.name\"\n            rows=\"9\"\n            v-model=\"model\"\n          />\n        </div>\n        <div v-else>\n          <p>Not recognize field type: {{ column.type }}</p>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n  name: 'CreateResourceField',\n  props: {\n    column: Object,\n    relations: Object,\n    options: Array,\n    getData: Boolean,\n  },\n  data: () => {\n    return {\n        test: 'test',\n        model: null,\n        file: false,\n    }\n  },\n  computed: {\n      flag: function(){\n          let flag = false\n          for(var i=0; i< this.options.length; i++){\n            if(this.options[i]['value'] == this.column.type){\n              flag = true\n              break\n            }\n          }\n          return flag\n      }\n  },\n  methods:{\n    handleFileUpload(files, event){\n      this.model = files[0];\n      this.file = true;\n    },\n    getDataFunction(){\n          //console.log('getData ' + this.columnName);\n      let data = {\n        data: this.model,\n        file: this.file,\n        name: this.column.column_name\n      }\n      this.$emit('sendData', data)\n    }\n  },\n  watch:{\n      'getData': function(){\n          if(this.getData === true){\n            this.getDataFunction()\n          }\n      }\n  }\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateResourceField.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateResourceField.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CreateResourceField.vue?vue&type=template&id=7960a808&\"\nimport script from \"./CreateResourceField.vue?vue&type=script&lang=js&\"\nexport * from \"./CreateResourceField.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <CRow>\n    <CCol col=\"12\" xl=\"6\">\n      <transition name=\"slide\">\n      <CCard>\n        <CCardBody>\n            <h3>\n              Create {{ form.name }}\n            </h3>\n            <CAlert\n              :show.sync=\"dismissCountDown\"\n              color=\"primary\"\n              fade\n            >\n              ({{dismissCountDown}}) {{ message }}\n            </CAlert>\n\n            <CreateResourceField\n              v-for=\"column in columns\"\n              v-bind:key=\"column.id\"\n              :column=\"column\"\n              :relations=\"relations\"\n              :options=\"inputOptions\"\n\n              @sendData=\"receiveDataFormField\"\n              :getData=\"getData\"\n            >\n            </CreateResourceField>\n\n            <CButton class=\"mt-2\" color=\"primary\" @click=\"storeFirstStep()\">Create</CButton>\n            <CButton class=\"mt-2\" color=\"primary\" @click=\"goBack\">Back</CButton>            \n\n        </CCardBody>\n      </CCard>\n      </transition>\n    </CCol>\n  </CRow>\n</template>\n\n<script>\nimport CreateResourceField from './CreateResourceField'\nimport axios from 'axios'\n\nexport default {\n  name: 'CreateResources',\n  components:{\n     'CreateResourceField': CreateResourceField\n  },\n  data: () => {\n    return {\n      message: '',\n      dismissSecs: 7,\n      dismissCountDown: 0,\n      form: {},\n      columns: [],\n      relations: [],\n      inputOptions: [],\n      receiveFormFields: [],\n      getData: false,\n    }\n  },\n  watch: {\n    activePage(){\n      this.getResources();\n    },\n  },\n  computed: {\n  },\n  methods: {\n    goBack() {\n      this.$router.go(-1)\n    },\n    storeFirstStep(){\n      this.getData = true\n    },\n    receiveDataFormField(data){\n      let self = this;\n      self.receiveFormFields.push(data);\n      if(self.receiveFormFields.length == self.columns.length){\n        self.store();\n      }\n    },\n    preparePostDataForStore(){\n      let formData = new FormData();\n      for(let i=0; i<this.receiveFormFields.length; i++){\n        formData.append(this.receiveFormFields[i].name, this.receiveFormFields[i].data)\n      }\n      return formData\n    },\n    store(files, event){\n      let self = this;\n      let postData = self.preparePostDataForStore();\n      axios.post(   this.$apiAdress + '/api/resource/' + self.$route.params.bread + '/resource?token=' + localStorage.getItem(\"api_token\"),\n        postData,\n        { headers: {\n            'Content-Type': 'multipart/form-data'\n        }}\n      ).then(function(){\n        self.$router.go(-1)\n        self.message = 'Successfully added to ' + self.form.name\n        self.showAlert();\n      })\n      .catch(function(error){\n        console.log(error)\n        self.$router.push({ path: '/login' })\n      });\n    },\n    countDownChanged (dismissCountDown) {\n      this.dismissCountDown = dismissCountDown\n    },\n    showAlert () {\n      this.dismissCountDown = this.dismissSecs\n    },\n    getFields (){\n      let self = this;\n      axios.get(  this.$apiAdress + '/api/resource/' + self.$route.params.bread + '/resource/create?token=' + localStorage.getItem(\"api_token\") )\n      .then(function (response) {\n        self.form = response.data.form\n        self.columns = response.data.columns\n        self.relations = response.data.relations\n        self.inputOptions = response.data.inputOptions\n\n\n\n      }).catch(function (error) {\n        console.log(error);\n        self.$router.push({ path: '/login' })\n      });\n    },\n  },\n  mounted: function(){\n    this.getFields();\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateResources.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateResources.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CreateResources.vue?vue&type=template&id=339c6dbc&scoped=true&\"\nimport script from \"./CreateResources.vue?vue&type=script&lang=js&\"\nexport * from \"./CreateResources.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"339c6dbc\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}