(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b5f0fe48"],{"6bb2":function(e,n,t){},"7d59":function(e,n,t){"use strict";t.r(n);var o=function(){var e=this,n=e._self._c;return n("CRow",[n("CCol",{attrs:{col:"12",lg:"6"}},[n("CCard",[n("CCardHeader",[e._v(" Ajouter une donnée ")]),n("CCardBody",[n("CSelect",{attrs:{label:"Groupe",value:e.donnee.groupe_id,plain:!0,options:e.groupes},on:{"update:value":function(n){return e.$set(e.donnee,"groupe_id",n)},change:function(n){return e.findIndicateurByGroupe(n)}}}),n("CSelect",{attrs:{label:"Localisation",value:e.donnee.localisation_id,plain:!0,options:e.localisations},on:{"update:value":function(n){return e.$set(e.donnee,"localisation_id",n)}}}),n("CSelect",{attrs:{label:"Indicateur",value:e.donnee.indicateur_id,plain:!0,options:e.indicateurs},on:{"update:value":function(n){return e.$set(e.donnee,"indicateur_id",n)},change:function(n){return e.findSousIndicateurByDesagregation(n)}}}),e.desagregation_id?n("CSelect",{attrs:{label:"Sous indicateur",value:e.donnee.sous_indicateur_id,plain:!0,options:e.sousIndicateurs},on:{"update:value":function(n){return e.$set(e.donnee,"sous_indicateur_id",n)}}}):e._e(),n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-12 form-group",attrs:{role:"group"}},[n("label",{staticClass:"custom-control-inline"},[e._v(" Période ")]),e._l(e.periodesDispobible,(function(t){return n("div",{key:t,staticClass:"custom-control custom-control-inline custom-radio",attrs:{role:"group",label:t}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.donnee.periode,expression:"donnee.periode"}],staticClass:"custom-control-input",attrs:{id:"periode"+t,type:"radio"},domProps:{value:t,checked:e._q(e.donnee.periode,t)},on:{click:function(n){return e.updatedListPeriode(t)},change:function(n){return e.$set(e.donnee,"periode",t)}}}),n("label",{staticClass:"custom-control-label",attrs:{for:"periode"+t}},[e._v(" "+e._s(t)+" ")])])}))],2)]),e.donnee.periode&&"ANNUEL"!=e.donnee.periode?n("CSelect",{attrs:{label:"Choix période",value:e.donnee.periode_value,plain:!0,options:e.choixPeriodes},on:{"update:value":function(n){return e.$set(e.donnee,"periode_value",n)},"update:options":function(n){e.choixPeriodes=n}}}):e._e(),n("CInput",{attrs:{label:"Annee",type:"text",placeholder:"Annee","is-valid":e.anneeValidator},model:{value:e.donnee.annee,callback:function(n){e.$set(e.donnee,"annee",n)},expression:"donnee.annee"}}),n("CInput",{attrs:{label:"Valeur",type:"text",placeholder:"Valeur"},model:{value:e.donnee.valeur,callback:function(n){e.$set(e.donnee,"valeur",n)},expression:"donnee.valeur"}}),n("CInput",{attrs:{label:"Source",type:"text",placeholder:"Source"},model:{value:e.donnee.source,callback:function(n){e.$set(e.donnee,"source",n)},expression:"donnee.source"}}),n("CButton",{attrs:{color:"primary"},on:{click:function(n){return e.store()}}},[e._v("Ajouter")]),e._v("   "),n("CButton",{attrs:{color:"secondary"},on:{click:e.goBack}},[e._v("Retour")])],1)],1)],1)],1)},a=[],i=t("bc3a"),r=t.n(i);function s(e){return c(e)||d(e)||u(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,n){if(e){if("string"===typeof e)return p(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(e,n):void 0}}function d(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e){if(Array.isArray(e))return p(e)}function p(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=new Array(n);t<n;t++)o[t]=e[t];return o}var v={name:"CreateDonnee",props:{caption:{type:String,default:"Donnee id"}},data:function(){return{donnee:{libelle:"",groupe_id:"",sous_indicateur_id:"",periode:null},groupes:[],periodes:[],localisations:[],periodeList:["MENSUEL","TRIMESTRIEL","SEMESTRIEL","ANNUEL"],indicateurs:[],sousIndicateurs:[],desagregation_id:null,message:"",periodesDispobible:[],choixPeriodes:[]}},methods:{goBack:function(){this.$router.go(-1)},selectRadioSelectPeriode:function(e){var n=this.periodes.indexOf(e);n>-1?this.periodes.splice(n,1):this.periodes.push(e)},updatedListPeriode:function(e){switch(this.choixPeriodes=[],e){case"TRIMESTRIEL":this.choixPeriodes=[{value:1,label:"Trimestre 1"},{value:2,label:"Trimestre 2"},{value:3,label:"Trimestre 3"},{value:4,label:"Trimestre 4"}];break;case"MENSUEL":this.choixPeriodes=[{value:1,label:"Janvier"},{value:2,label:"Février"},{value:3,label:"Mars"},{value:4,label:"Avril"},{value:5,label:"Mai"},{value:6,label:"Juin"},{value:7,label:"Juillet"},{value:8,label:"Aout"},{value:9,label:"Septembre"},{value:10,label:"Octobre"},{value:11,label:"Novembre"},{value:12,label:"Décembre"}];break;case"SEMESTRIEL":this.choixPeriodes=[{value:1,label:"Semestre 1"},{value:2,label:"Semestre 2"}];break;case"ANNUEL":this.choixPeriodes=[];break;default:break}this.donnee.periode_value=this.choixPeriodes.length>0?this.choixPeriodes[0].value:null},store:function(){var e=this;"ANNUEL"==e.donnee.periode&&(e.donnee.periode_value=e.donnee.annee),console.log(e.donnee),r.a.post(this.$apiAdress+"/api/donnees?token="+localStorage.getItem("api_token"),e.donnee).then((function(n){e.donnee={desagregation_id:"",libelle:""},e.$toasted.show(n.data.message,{type:"success"})})).catch((function(n){if("The given data was invalid."==n.response.data.message){for(var t in e.message="",n.response.data.errors)n.response.data.errors.hasOwnProperty(t)&&(e.message+=n.response.data.errors[t][0]+"  ");e.$toasted.show(e.message,{type:"danger"})}else console.log(n)}))},anneeValidator:function(e){return e?e<=2023&&e>=1900&&null:null},findLocalisationByGroupe:function(e){var n=this;r.a.get(this.$apiAdress+"/api/indicateurs/findLocalisationByGroupe/"+n.donnee.groupe_id+"?token="+localStorage.getItem("api_token")).then((function(e){console.log(e),n.localisations=e.data;var t=[{label:"",value:null}];t.push.apply(t,s(n.localisations)),n.localisations=t})).catch((function(e){n.localisations=[]}))},findIndicateurByGroupe:function(e){this.findLocalisationByGroupe(e);var n=this;r.a.get(this.$apiAdress+"/api/indicateurs/findByGroupe/"+n.donnee.groupe_id+"?token="+localStorage.getItem("api_token")).then((function(e){console.log(e),n.indicateurs=e.data;var t=[{label:"",value:null}];t.push.apply(t,s(n.indicateurs)),n.indicateurs=t,n.sous_indicateurs=[],n.periode=null})).catch((function(e){n.indicateurs=[]}))},findSousIndicateurByDesagregation:function(e){var n=this,t=this;if(t.desagregation_id=null,this.indicateurs){var o=this.indicateurs.find((function(e){return e.id==n.donnee.indicateur_id}));o&&(null!=o.periode&&(t.periodesDispobible=o.periode.split(",")),t.desagregation_id=o.desagregation_id)}r.a.get(this.$apiAdress+"/api/sous_indicateurs/findByDesagregation/"+t.desagregation_id+"?token="+localStorage.getItem("api_token")).then((function(e){t.sousIndicateurs=e.data;var n=[{label:"",value:null}];n.push.apply(n,s(t.sousIndicateurs)),t.sousIndicateurs=n})).catch((function(e){t.sousIndicateurs=[]}))}},mounted:function(){var e=this;r.a.get(this.$apiAdress+"/api/donnees/create?token="+localStorage.getItem("api_token")).then((function(n){e.indicateurs=n.data.indicateurs,e.groupes=n.data.groupes;var t=[{label:"",value:null}];t.push.apply(t,s(e.indicateurs)),e.indicateurs=t,e.donnee.groupe_id=e.groupes.length>0?e.groupes[0].value:null,e.findLocalisationByGroupe(null)})).catch((function(n){e.$router.push({path:"login"})}))}},f=v,g=(t("b901"),t("2877")),h=Object(g["a"])(f,o,a,!1,null,"862bb600",null);n["default"]=h.exports},b901:function(e,n,t){"use strict";t("6bb2")}}]);
//# sourceMappingURL=chunk-b5f0fe48.d7b9ac6d.js.map