(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b6ade"],{"1dd9":function(e,n,t){"use strict";t.r(n);var o=function(){var e=this,n=e._self._c;return n("CRow",[n("CCol",{attrs:{col:"12",lg:"6"}},[n("CCard",{attrs:{"no-header":""}},[n("CCardBody",[n("h3",[e._v(" Modifier l'élément du menu ")]),n("CAlert",{attrs:{show:e.dismissCountDown,color:"primary",fade:""},on:{"update:show":function(n){e.dismissCountDown=n}}},[e._v(" ("+e._s(e.dismissCountDown)+") "+e._s(e.message)+" ")]),n("CSelect",{attrs:{label:"Menu",value:e.menuelement.menu,plain:!0,options:e.menulist},on:{"update:value":[function(n){return e.$set(e.menuelement,"menu",n)},function(n){return e.updateSelectParent()}]}}),n("p",[e._v("Roles")]),n("div",{staticClass:"m-3"},e._l(e.role,(function(t){return n("CInputCheckbox",{key:t,attrs:{label:t,name:"selectRoles",checked:e.fixedmenuroles[t]},on:{"update:checked":function(n){return e.selectRadioSelectRole(t)}}})})),1),n("CInput",{attrs:{label:"Name",type:"text",placeholder:"Name"},model:{value:e.menuelement.name,callback:function(n){e.$set(e.menuelement,"name",n)},expression:"menuelement.name"}}),n("CSelect",{attrs:{label:"Type",value:e.menuelement.slug,plain:!0,options:e.types},on:{"update:value":[function(n){return e.$set(e.menuelement,"slug",n)},function(n){return e.changeType()}]}}),n("p",[e._v("Autre")]),e.divHref?n("div",[n("CInput",{attrs:{label:"Href",type:"text",placeholder:"Href"},model:{value:e.menuelement.href,callback:function(n){e.$set(e.menuelement,"href",n)},expression:"menuelement.href"}})],1):e._e(),e.divDropdownParent?n("div",[n("CSelect",{attrs:{label:"Dropdown parent",value:e.menuelement.parent_id,plain:!0,options:e.parents},on:{"update:value":function(n){return e.$set(e.menuelement,"parent_id",n)}}})],1):e._e(),e.divIcon?n("div",[e._v(" Icon - Find icon class in: "),n("a",{attrs:{href:"https://coreui.io/docs/icons/icons-list/#coreui-icons-free-502-icons",target:"_blank"}},[e._v(" CoreUI icons documentation ")]),n("br"),n("CInput",{attrs:{type:"text",placeholder:"CoreUI Icon class - example: cil-bell"},model:{value:e.menuelement.icon,callback:function(n){e.$set(e.menuelement,"icon",n)},expression:"menuelement.icon"}})],1):e._e(),n("CButton",{attrs:{color:"primary"},on:{click:function(n){return e.save()}}},[e._v("Modifier")]),e._v("   "),n("CButton",{attrs:{color:"secondary"},on:{click:e.goBack}},[e._v("Retour")])],1)],1)],1)],1)},s=[],a=t("bc3a"),l=t.n(a),r={name:"CreateMenuElement",data:function(){return{resultroles:[],fixedmenuroles:[],menuroles:[],role:[],menulist:[],parents:[],types:[{label:"Link",value:"link"},{label:"Title",value:"title"},{label:"Dropdown",value:"dropdown"}],menuelement:{menu:0,name:"",role:[],slug:"link",href:"",icon:"",parent_id:0},message:"",dismissSecs:7,dismissCountDown:0,showDismissibleAlert:!1,divHref:!1,divDropdownParent:!1,divIcon:!1}},methods:{goBack:function(){this.$router.go(-1)},selectRadioSelectRole:function(e){var n=this.resultroles.indexOf(e);n>-1?this.resultroles.splice(n,1):this.resultroles.push(e)},changeType:function(){var e=this.menuelement.slug;"title"==e?(this.divHref=!1,this.divDropdownParent=!1,this.divIcon=!1):"link"==e?(this.divHref=!0,this.divDropdownParent=!0,this.divIcon=!0):(this.divHref=!1,this.divDropdownParent=!0,this.divIcon=!0)},updateSelectParent:function(){var e=this;l.a.get(this.$apiAdress+"/api/menu/element/get-parents?token="+localStorage.getItem("api_token")+"&menu="+e.menuelement.menu).then((function(n){e.parents=[{label:"Has no parent",value:"none"}];for(var t=0;t<n.data.length;t++)e.parents.push(n.data[t])})).catch((function(n){console.log(n),e.$router.push({path:"login"})}))},save:function(){var e=this;console.log(e.menuelement),l.a.post(this.$apiAdress+"/api/menu/element/update?token="+localStorage.getItem("api_token"),{id:e.$route.params.id,menu:e.menuelement.menu_id,role:e.resultroles,type:e.menuelement.slug,icon:e.menuelement.icon,name:e.menuelement.name,href:e.menuelement.href,parent:e.menuelement.parent_id}).then((function(n){e.name="",e.$toasted.show("Le menu a été modifié avec succès",{type:"success"}),e.showAlert()})).catch((function(n){if("The given data was invalid."==n.response.data.message){for(var t in e.message="",n.response.data.errors)n.response.data.errors.hasOwnProperty(t)&&(e.message+=n.response.data.errors[t][0]+"  ");e.$toasted.show("Les données sont invalides",{type:"error"}),e.showAlert()}else console.log(n),e.$router.push({path:"login"})}))},countDownChanged:function(e){this.dismissCountDown=e},showAlert:function(){this.dismissCountDown=this.dismissSecs},getData:function(){var e=this;l.a.get(this.$apiAdress+"/api/menu/element/edit?token="+localStorage.getItem("api_token")+"&id="+e.$route.params.id).then((function(n){e.role=n.data.roles,e.menulist=n.data.menulist,e.menuelement=n.data.menuElement,e.menuroles=n.data.menuroles;for(var t=!1,o=0;o<e.role.length;o++){t=!1;for(var s=0;s<e.menuroles.length;s++)if(e.role[o]==e.menuroles[s].role_name){t=!0,e.resultroles.push(e.role[o]);break}e.fixedmenuroles[e.role[o]]=t}e.changeType()})).catch((function(n){console.log(n),e.$router.push({path:"/login"})}))}},mounted:function(){this.getData(),this.menuelement.menu=this.$route.params.menu,this.updateSelectParent()}},i=r,u=t("2877"),m=Object(u["a"])(i,o,s,!1,null,null,null);n["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0b6ade.262c30b9.js.map