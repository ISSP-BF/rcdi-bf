{"version":3,"sources":["webpack:///./src/views/resources/CreateResources.vue","webpack:///./src/views/resources/CreateResourceField.vue","webpack:///src/views/resources/CreateResourceField.vue","webpack:///./src/views/resources/CreateResourceField.vue?c2d2","webpack:///./src/views/resources/CreateResourceField.vue?50cc","webpack:///src/views/resources/CreateResources.vue","webpack:///./src/views/resources/CreateResources.vue?03c5","webpack:///./src/views/resources/CreateResources.vue?f6f8"],"names":["render","_vm","this","_c","_self","attrs","_v","_s","form","name","dismissCountDown","on","$event","message","_l","columns","column","key","id","relations","inputOptions","getData","receiveDataFormField","staticClass","storeFirstStep","goBack","staticRenderFns","flag","type","model","value","callback","$$v","expression","column_name","relation","label","handleFileUpload","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,OAAO,CAACA,EAAG,OAAO,CAACE,MAAM,CAAC,IAAM,KAAK,GAAK,MAAM,CAACF,EAAG,aAAa,CAACE,MAAM,CAAC,KAAO,UAAU,CAACF,EAAG,QAAQ,CAACA,EAAG,YAAY,CAACA,EAAG,KAAK,CAACF,EAAIK,GAAG,WAAWL,EAAIM,GAAGN,EAAIO,KAAKC,MAAM,OAAON,EAAG,SAAS,CAACE,MAAM,CAAC,KAAOJ,EAAIS,iBAAiB,MAAQ,UAAU,KAAO,IAAIC,GAAG,CAAC,cAAc,SAASC,GAAQX,EAAIS,iBAAiBE,KAAU,CAACX,EAAIK,GAAG,KAAKL,EAAIM,GAAGN,EAAIS,kBAAkB,KAAKT,EAAIM,GAAGN,EAAIY,SAAS,OAAOZ,EAAIa,GAAIb,EAAIc,SAAS,SAASC,GAAQ,OAAOb,EAAG,sBAAsB,CAACc,IAAID,EAAOE,GAAGb,MAAM,CAAC,OAASW,EAAO,UAAYf,EAAIkB,UAAU,QAAUlB,EAAImB,aAAa,QAAUnB,EAAIoB,SAASV,GAAG,CAAC,SAAWV,EAAIqB,2BAA0BnB,EAAG,UAAU,CAACoB,YAAY,OAAOlB,MAAM,CAAC,MAAQ,WAAWM,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOX,EAAIuB,oBAAoB,CAACvB,EAAIK,GAAG,YAAYH,EAAG,UAAU,CAACoB,YAAY,OAAOlB,MAAM,CAAC,MAAQ,WAAWM,GAAG,CAAC,MAAQV,EAAIwB,SAAS,CAACxB,EAAIK,GAAG,WAAW,IAAI,IAAI,IAAI,IAAI,IAEj7BoB,EAAkB,GCFlB1B,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACoB,YAAY,aAAa,CAAEtB,EAAI0B,KAAMxB,EAAG,MAAM,CAAqB,YAAnBF,EAAIe,OAAOY,KAAoBzB,EAAG,MAAM,CAACA,EAAG,iBAAiB,CAACE,MAAM,CAAC,MAAQJ,EAAIe,OAAOP,KAAK,MAAQ,OAAO,SAAU,GAAOoB,MAAM,CAACC,MAAO7B,EAAI4B,MAAOE,SAAS,SAAUC,GAAM/B,EAAI4B,MAAMG,GAAKC,WAAW,YAAY,GAAuB,SAAnBhC,EAAIe,OAAOY,KAAiBzB,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACoB,YAAY,QAAQ,CAACtB,EAAIK,GAAG,IAAIL,EAAIM,GAAGN,EAAIe,OAAOP,MAAM,OAAON,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,MAAM,KAAO,QAAQ,MAAQ,OAAO,KAAOJ,EAAIe,OAAOkB,YAAY,SAAU,KAAS/B,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,KAAK,KAAO,QAAQ,MAAQ,QAAQ,KAAOJ,EAAIe,OAAOkB,YAAY,SAAU,MAAU,GAAG/B,EAAG,MAAM,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQJ,EAAIe,OAAOP,KAAK,KAAOR,EAAIe,OAAOY,KAAK,YAAc3B,EAAIe,OAAOP,MAAMoB,MAAM,CAACC,MAAO7B,EAAI4B,MAAOE,SAAS,SAAUC,GAAM/B,EAAI4B,MAAMG,GAAKC,WAAW,YAAY,KAAyB,mBAAnBhC,EAAIe,OAAOY,KAA2BzB,EAAG,MAAM,CAACA,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQJ,EAAIe,OAAOP,KAAK,QAAUR,EAAIkB,UAAU,YAAclB,EAAIe,OAAOkB,aAAa,MAAQjC,EAAI4B,OAAOlB,GAAG,CAAC,eAAe,SAASC,GAAQX,EAAI4B,MAAMjB,OAAY,GAAuB,kBAAnBX,EAAIe,OAAOY,KAA0BzB,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACoB,YAAY,QAAQ,CAACtB,EAAIK,GAAGL,EAAIM,GAAGN,EAAIe,OAAOP,SAASR,EAAIa,GAAIb,EAAIkB,UAAU,YAAclB,EAAIe,OAAOkB,cAAc,SAASC,GAAU,OAAOhC,EAAG,cAAc,CAACc,IAAIkB,EAASL,MAAMzB,MAAM,CAAC,MAAQ8B,EAASC,MAAM,KAAO,QAAQ,MAAQD,EAASL,MAAM,KAAO7B,EAAIe,OAAOkB,mBAAkB,GAAuB,QAAnBjC,EAAIe,OAAOY,MAAqC,SAAnB3B,EAAIe,OAAOY,KAAiBzB,EAAG,MAAM,CAACA,EAAG,aAAa,CAACE,MAAM,CAAC,MAAQJ,EAAIe,OAAOP,MAAME,GAAG,CAAC,OAASV,EAAIoC,qBAAqB,GAAuB,aAAnBpC,EAAIe,OAAOY,KAAqBzB,EAAG,MAAM,CAACA,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQJ,EAAIe,OAAOP,KAAK,YAAcR,EAAIe,OAAOP,KAAK,KAAO,KAAKoB,MAAM,CAACC,MAAO7B,EAAI4B,MAAOE,SAAS,SAAUC,GAAM/B,EAAI4B,MAAMG,GAAKC,WAAW,YAAY,GAAG9B,EAAG,MAAM,CAACA,EAAG,IAAI,CAACF,EAAIK,GAAG,6BAA6BL,EAAIM,GAAGN,EAAIe,OAAOY,cAEv4DF,EAAkB,GC0EtB,GACA,2BACA,OACA,cACA,iBACA,cACA,iBAEA,gBACA,OACA,YACA,WACA,UAGA,UACA,gBAEA,IADA,SACA,8BACA,+CACA,KACA,MAGA,WAGA,SACA,+BACA,gBACA,cAEA,2BAEA,OACA,gBACA,eACA,8BAEA,2BAGA,OACA,oBACA,kBACA,0BCzH2W,I,YCOvWY,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,6BCyBf,GACA,uBACA,YACA,uBAEA,gBACA,OACA,WACA,cACA,mBACA,QACA,WACA,aACA,gBACA,qBACA,aAGA,OACA,sBACA,sBAGA,YAEA,SACA,kBACA,qBAEA,0BACA,iBAEA,iCACA,WACA,4BACA,8CACA,WAGA,mCAEA,IADA,mBACA,wCACA,wEAEA,UAEA,oBACA,WACA,8BACA,qHACA,EACA,UACA,wCAEA,iBACA,iBACA,+CACA,iBAEA,mBACA,eACA,oCAGA,6BACA,yBAEA,qBACA,wCAEA,qBACA,WACA,4HACA,kBACA,mBACA,yBACA,6BACA,sCAIA,mBACA,eACA,qCAIA,mBACA,mBCnIuW,ICOnW,EAAY,eACd,EACAtC,EACA0B,GACA,EACA,KACA,WACA,MAIa,e","file":"js/chunk-2d21e5a7.c06b9a45.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('CRow',[_c('CCol',{attrs:{\"col\":\"12\",\"xl\":\"6\"}},[_c('transition',{attrs:{\"name\":\"slide\"}},[_c('CCard',[_c('CCardBody',[_c('h3',[_vm._v(\" Create \"+_vm._s(_vm.form.name)+\" \")]),_c('CAlert',{attrs:{\"show\":_vm.dismissCountDown,\"color\":\"primary\",\"fade\":\"\"},on:{\"update:show\":function($event){_vm.dismissCountDown=$event}}},[_vm._v(\" (\"+_vm._s(_vm.dismissCountDown)+\") \"+_vm._s(_vm.message)+\" \")]),_vm._l((_vm.columns),function(column){return _c('CreateResourceField',{key:column.id,attrs:{\"column\":column,\"relations\":_vm.relations,\"options\":_vm.inputOptions,\"getData\":_vm.getData},on:{\"sendData\":_vm.receiveDataFormField}})}),_c('CButton',{staticClass:\"mt-2\",attrs:{\"color\":\"primary\"},on:{\"click\":function($event){return _vm.storeFirstStep()}}},[_vm._v(\"Create\")]),_c('CButton',{staticClass:\"mt-2\",attrs:{\"color\":\"primary\"},on:{\"click\":_vm.goBack}},[_vm._v(\"Back\")])],2)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"mb-1 mt-1\"},[(_vm.flag)?_c('div',[(_vm.column.type == 'checkbox')?_c('div',[_c('CInputCheckbox',{attrs:{\"label\":_vm.column.name,\"value\":\"true\",\"checked\":false},model:{value:(_vm.model),callback:function ($$v) {_vm.model=$$v},expression:\"model\"}})],1):(_vm.column.type == 'radio')?_c('div',[_c('label',{staticClass:\"mt-3\"},[_vm._v(\" \"+_vm._s(_vm.column.name)+\" \")]),_c('CInputRadio',{attrs:{\"label\":\"yes\",\"type\":\"radio\",\"value\":\"true\",\"name\":_vm.column.column_name,\"checked\":false}}),_c('CInputRadio',{attrs:{\"label\":\"no\",\"type\":\"radio\",\"value\":\"false\",\"name\":_vm.column.column_name,\"checked\":false}})],1):_c('div',[_c('CInput',{attrs:{\"label\":_vm.column.name,\"type\":_vm.column.type,\"placeholder\":_vm.column.name},model:{value:(_vm.model),callback:function ($$v) {_vm.model=$$v},expression:\"model\"}})],1)]):(_vm.column.type == 'relation_select')?_c('div',[_c('CSelect',{attrs:{\"label\":_vm.column.name,\"options\":_vm.relations['relation_' + _vm.column.column_name],\"value\":_vm.model},on:{\"update:value\":function($event){_vm.model=$event}}})],1):(_vm.column.type == 'relation_radio')?_c('div',[_c('label',{staticClass:\"mt-3\"},[_vm._v(_vm._s(_vm.column.name))]),_vm._l((_vm.relations['relation_' + _vm.column.column_name]),function(relation){return _c('CInputRadio',{key:relation.value,attrs:{\"label\":relation.label,\"type\":\"radio\",\"value\":relation.value,\"name\":_vm.column.column_name}})})],2):(_vm.column.type == 'file' || _vm.column.type == 'image')?_c('div',[_c('CInputFile',{attrs:{\"label\":_vm.column.name},on:{\"change\":_vm.handleFileUpload}})],1):(_vm.column.type == 'text_area')?_c('div',[_c('CTextarea',{attrs:{\"label\":_vm.column.name,\"placeholder\":_vm.column.name,\"rows\":\"9\"},model:{value:(_vm.model),callback:function ($$v) {_vm.model=$$v},expression:\"model\"}})],1):_c('div',[_c('p',[_vm._v(\"Not recognize field type: \"+_vm._s(_vm.column.type))])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"mb-1 mt-1\">\r\n        <div v-if=\"flag\">\r\n            <div v-if=\"column.type == 'checkbox'\">\r\n              <CInputCheckbox\r\n                :label=\"column.name\"\r\n                value=\"true\"\r\n                :checked=\"false\"\r\n                v-model=\"model\"\r\n              />\r\n            </div>\r\n            <div v-else-if=\"column.type == 'radio'\">\r\n              <label class=\"mt-3\"> {{ column.name }} </label>\r\n              <CInputRadio\r\n                label=\"yes\"\r\n                type=\"radio\"\r\n                value=\"true\"\r\n                :name=\"column.column_name\"\r\n                :checked=\"false\"\r\n              />\r\n              <CInputRadio\r\n                label=\"no\"\r\n                type=\"radio\"\r\n                value=\"false\"\r\n                :name=\"column.column_name\"\r\n                :checked=\"false\"\r\n              />\r\n            </div>\r\n            <div v-else>\r\n              <CInput \r\n                :label=\"column.name\" \r\n                :type=\"column.type\" \r\n                :placeholder=\"column.name\" \r\n                v-model=\"model\"\r\n              ></CInput>\r\n            </div>\r\n        </div>\r\n        <div v-else-if=\"column.type == 'relation_select'\">\r\n          <CSelect\r\n            :label=\"column.name\"\r\n            :options=\"relations['relation_' + column.column_name]\"\r\n            :value.sync=\"model\"\r\n          />\r\n        </div>\r\n        <div v-else-if=\"column.type == 'relation_radio'\">\r\n          <label class=\"mt-3\">{{ column.name }}</label>\r\n          <CInputRadio\r\n            v-for=\"relation in relations['relation_' + column.column_name]\"\r\n            :key=\"relation.value\"\r\n            :label=\"relation.label\"\r\n            type=\"radio\"\r\n            :value=\"relation.value\"\r\n            :name=\"column.column_name\"\r\n          />        \r\n        </div>\r\n        <div v-else-if=\"column.type == 'file' || column.type == 'image'\">\r\n          <CInputFile\r\n            :label=\"column.name\" \r\n            v-on:change=\"handleFileUpload\"\r\n          />\r\n        </div>\r\n        <div v-else-if=\"column.type == 'text_area'\">\r\n          <CTextarea\r\n            :label=\"column.name\"\r\n            :placeholder=\"column.name\"\r\n            rows=\"9\"\r\n            v-model=\"model\"\r\n          />\r\n        </div>\r\n        <div v-else>\r\n          <p>Not recognize field type: {{ column.type }}</p>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'CreateResourceField',\r\n  props: {\r\n    column: Object,\r\n    relations: Object,\r\n    options: Array,\r\n    getData: Boolean,\r\n  },\r\n  data: () => {\r\n    return {\r\n        test: 'test',\r\n        model: null,\r\n        file: false,\r\n    }\r\n  },\r\n  computed: {\r\n      flag: function(){\r\n          let flag = false\r\n          for(var i=0; i< this.options.length; i++){\r\n            if(this.options[i]['value'] == this.column.type){\r\n              flag = true\r\n              break\r\n            }\r\n          }\r\n          return flag\r\n      }\r\n  },\r\n  methods:{\r\n    handleFileUpload(files, event){\r\n      this.model = files[0];\r\n      this.file = true;\r\n    },\r\n    getDataFunction(){\r\n          //console.log('getData ' + this.columnName);\r\n      let data = {\r\n        data: this.model,\r\n        file: this.file,\r\n        name: this.column.column_name\r\n      }\r\n      this.$emit('sendData', data)\r\n    }\r\n  },\r\n  watch:{\r\n      'getData': function(){\r\n          if(this.getData === true){\r\n            this.getDataFunction()\r\n          }\r\n      }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateResourceField.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateResourceField.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CreateResourceField.vue?vue&type=template&id=7960a808\"\nimport script from \"./CreateResourceField.vue?vue&type=script&lang=js\"\nexport * from \"./CreateResourceField.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <CRow>\r\n    <CCol col=\"12\" xl=\"6\">\r\n      <transition name=\"slide\">\r\n      <CCard>\r\n        <CCardBody>\r\n            <h3>\r\n              Create {{ form.name }}\r\n            </h3>\r\n            <CAlert\r\n              :show.sync=\"dismissCountDown\"\r\n              color=\"primary\"\r\n              fade\r\n            >\r\n              ({{dismissCountDown}}) {{ message }}\r\n            </CAlert>\r\n\r\n            <CreateResourceField\r\n              v-for=\"column in columns\"\r\n              v-bind:key=\"column.id\"\r\n              :column=\"column\"\r\n              :relations=\"relations\"\r\n              :options=\"inputOptions\"\r\n\r\n              @sendData=\"receiveDataFormField\"\r\n              :getData=\"getData\"\r\n            >\r\n            </CreateResourceField>\r\n\r\n            <CButton class=\"mt-2\" color=\"primary\" @click=\"storeFirstStep()\">Create</CButton>\r\n            <CButton class=\"mt-2\" color=\"primary\" @click=\"goBack\">Back</CButton>            \r\n\r\n        </CCardBody>\r\n      </CCard>\r\n      </transition>\r\n    </CCol>\r\n  </CRow>\r\n</template>\r\n\r\n<script>\r\nimport CreateResourceField from './CreateResourceField'\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'CreateResources',\r\n  components:{\r\n     'CreateResourceField': CreateResourceField\r\n  },\r\n  data: () => {\r\n    return {\r\n      message: '',\r\n      dismissSecs: 7,\r\n      dismissCountDown: 0,\r\n      form: {},\r\n      columns: [],\r\n      relations: [],\r\n      inputOptions: [],\r\n      receiveFormFields: [],\r\n      getData: false,\r\n    }\r\n  },\r\n  watch: {\r\n    activePage(){\r\n      this.getResources();\r\n    },\r\n  },\r\n  computed: {\r\n  },\r\n  methods: {\r\n    goBack() {\r\n      this.$router.go(-1)\r\n    },\r\n    storeFirstStep(){\r\n      this.getData = true\r\n    },\r\n    receiveDataFormField(data){\r\n      let self = this;\r\n      self.receiveFormFields.push(data);\r\n      if(self.receiveFormFields.length == self.columns.length){\r\n        self.store();\r\n      }\r\n    },\r\n    preparePostDataForStore(){\r\n      let formData = new FormData();\r\n      for(let i=0; i<this.receiveFormFields.length; i++){\r\n        formData.append(this.receiveFormFields[i].name, this.receiveFormFields[i].data)\r\n      }\r\n      return formData\r\n    },\r\n    store(files, event){\r\n      let self = this;\r\n      let postData = self.preparePostDataForStore();\r\n      axios.post(   this.$apiAdress + '/api/resource/' + self.$route.params.bread + '/resource?token=' + localStorage.getItem(\"api_token\"),\r\n        postData,\r\n        { headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n        }}\r\n      ).then(function(){\r\n        self.$router.go(-1)\r\n        self.message = 'Successfully added to ' + self.form.name\r\n        self.showAlert();\r\n      })\r\n      .catch(function(error){\r\n        console.log(error)\r\n        self.$router.push({ path: '/login' })\r\n      });\r\n    },\r\n    countDownChanged (dismissCountDown) {\r\n      this.dismissCountDown = dismissCountDown\r\n    },\r\n    showAlert () {\r\n      this.dismissCountDown = this.dismissSecs\r\n    },\r\n    getFields (){\r\n      let self = this;\r\n      axios.get(  this.$apiAdress + '/api/resource/' + self.$route.params.bread + '/resource/create?token=' + localStorage.getItem(\"api_token\") )\r\n      .then(function (response) {\r\n        self.form = response.data.form\r\n        self.columns = response.data.columns\r\n        self.relations = response.data.relations\r\n        self.inputOptions = response.data.inputOptions\r\n\r\n\r\n\r\n      }).catch(function (error) {\r\n        console.log(error);\r\n        self.$router.push({ path: '/login' })\r\n      });\r\n    },\r\n  },\r\n  mounted: function(){\r\n    this.getFields();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateResources.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateResources.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./CreateResources.vue?vue&type=template&id=339c6dbc&scoped=true\"\nimport script from \"./CreateResources.vue?vue&type=script&lang=js\"\nexport * from \"./CreateResources.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"339c6dbc\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}