(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22ccee"],{f58a:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c;return t("CRow",[t("CCol",{attrs:{col:"12",lg:"6"}},[t("CCard",{attrs:{"no-header":""}},[t("CCardBody",[t("h3",[e._v(" Création d'un nouveau élément du menu ")]),t("CAlert",{attrs:{show:e.dismissCountDown,color:"primary",fade:""},on:{"update:show":function(t){e.dismissCountDown=t}}},[e._v(" ("+e._s(e.dismissCountDown)+") "+e._s(e.message)+" ")]),t("CSelect",{attrs:{label:"Menu",value:e.menuelement.menu,plain:!0,options:e.menulist},on:{"update:value":[function(t){return e.$set(e.menuelement,"menu",t)},function(t){return e.updateSelectParent()}]}}),t("p",[e._v("Roles")]),t("div",{staticClass:"m-3"},e._l(e.role,(function(n){return t("CInputCheckbox",{key:n,attrs:{label:n,name:"selectRoles"},on:{"update:checked":function(t){return e.selectRadioSelectRole(n)}}})})),1),t("CInput",{attrs:{label:"Libelle",type:"text",placeholder:"Libelle"},model:{value:e.menuelement.name,callback:function(t){e.$set(e.menuelement,"name",t)},expression:"menuelement.name"}}),t("CSelect",{attrs:{label:"Type",value:e.menuelement.type,plain:!0,options:e.types},on:{"update:value":[function(t){return e.$set(e.menuelement,"type",t)},function(t){return e.changeType()}]}}),t("p",[e._v("Autre")]),e.divHref?t("div",[t("CInput",{attrs:{label:"Href",type:"text",placeholder:"Href"},model:{value:e.menuelement.href,callback:function(t){e.$set(e.menuelement,"href",t)},expression:"menuelement.href"}})],1):e._e(),e.divDropdownParent?t("div",[t("CSelect",{attrs:{label:"Parent déroulant",value:e.menuelement.parent,plain:!0,options:e.parents},on:{"update:value":function(t){return e.$set(e.menuelement,"parent",t)}}})],1):e._e(),e.divIcon?t("div",[e._v(" Icon - Rechercher une classe d'icônes dans: "),t("a",{attrs:{href:"https://coreui.io/docs/icons/icons-list/#coreui-icons-free-502-icons",target:"_blank"}},[e._v(" Documentation des icônes CoreUI ")]),t("br"),t("CInput",{attrs:{type:"text",placeholder:"CoreUI Icon class - example: cil-bell"},model:{value:e.menuelement.icon,callback:function(t){e.$set(e.menuelement,"icon",t)},expression:"menuelement.icon"}})],1):e._e(),t("CButton",{attrs:{color:"primary"},on:{click:function(t){return e.store()}}},[e._v("Ajouter")]),e._v("   "),t("CButton",{attrs:{color:"secondary"},on:{click:e.goBack}},[e._v("Retour")])],1)],1)],1)],1)},s=[],a=n("bc3a"),r=n.n(a),l={name:"CreateMenuElement",data:function(){return{role:[],menulist:[],parents:[],types:[{label:"Link",value:"link"},{label:"Title",value:"title"},{label:"Dropdown",value:"dropdown"}],menuelement:{menu:0,name:"",role:[],type:"link",href:"",icon:"",parent:0},message:"",dismissSecs:7,dismissCountDown:0,showDismissibleAlert:!1,divHref:!1,divDropdownParent:!1,divIcon:!1}},methods:{goBack:function(){this.$router.go(-1)},selectRadioSelectRole:function(e){var t=this.menuelement.role.indexOf(e);t>-1?this.menuelement.role.splice(t,1):this.menuelement.role.push(e)},changeType:function(){var e=this.menuelement.type;"title"==e?(this.divHref=!1,this.divDropdownParent=!1,this.divIcon=!1):"link"==e?(this.divHref=!0,this.divDropdownParent=!0,this.divIcon=!0):(this.divHref=!1,this.divDropdownParent=!0,this.divIcon=!0)},updateSelectParent:function(){var e=this;r.a.get(this.$apiAdress+"/api/menu/element/get-parents?token="+localStorage.getItem("api_token")+"&menu="+e.menuelement.menu).then((function(t){e.parents=[{label:"Has no parent",value:"none"}];for(var n=0;n<t.data.length;n++)e.parents.push(t.data[n])})).catch((function(t){console.log(t),e.$router.push({path:"login"})}))},store:function(){var e=this;r.a.post(this.$apiAdress+"/api/menu/element/store?token="+localStorage.getItem("api_token"),e.menuelement).then((function(t){e.name="",e.$toasted.show("Le menu a été créé avec succès",{type:"success"}),e.showAlert(),e.goBack()})).catch((function(t){if("The given data was invalid."==t.response.data.message){for(var n in e.message="",t.response.data.errors)t.response.data.errors.hasOwnProperty(n)&&(e.message+=t.response.data.errors[n][0]+"  ");e.$toasted.show("Les données sont invalides",{type:"error"}),e.showAlert()}else console.log(t),e.$router.push({path:"login"})}))},countDownChanged:function(e){this.dismissCountDown=e},showAlert:function(){this.dismissCountDown=this.dismissSecs},getData:function(){var e=this;r.a.get(this.$apiAdress+"/api/menu/element/create?token="+localStorage.getItem("api_token")+"&id="+e.$route.params.menu).then((function(t){e.role=t.data.roles,e.menulist=t.data.menulist})).catch((function(t){console.log(t),e.$router.push({path:"/login"})}))}},mounted:function(){this.getData(),this.menuelement.menu=this.$route.params.menu,this.updateSelectParent(),this.changeType()}},i=l,u=n("2877"),c=Object(u["a"])(i,o,s,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d22ccee.492e504d.js.map